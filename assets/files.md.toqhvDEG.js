import{_ as s,C as n,c as r,o as l,ag as a,j as i,a as t,G as d,w as c}from"./chunks/framework.DPDPlp3K.js";const h="/assets/filematrix_8.DWQ4kfA0.png",f="/assets/revision_cells.D0poF7Ms.gif",p="/assets/filematrix_9.5trXZamQ.png",u="/assets/filediffs_4.Dm6lwzmg.png",m="/assets/designated_reviewers_details.C7jTP4em.png",g="/assets/filematrix_1.E9RKtZcH.png",w="/assets/filematrix_2.CN6o9ES-.png",v="/assets/filematrix_11.DKVGcrsk.png",b="/assets/diffs_1.BpFoSn00.png",y="/assets/diffs_2.BtGaX13c.png",k="/assets/diffs_3.Bu7g29Nf.png",x="/assets/commit_matrix.DlCU8QUK.png",_="/assets/commit_review_1.ol-rI-11.png",q="/assets/commit_controls.B53ZPegB.png",T="/assets/summary_2.KXkstzFf.png",P="/assets/filediffs_1.BCFN--LL.png",R="/assets/filediffrename_1.BIEDW-hs.png",C="/assets/filediffs_3.B0EPHg-G.png",I="/assets/filediffs_16.D2EFaAev.png",S="/assets/filediffs_10.DYVGNHIF.png",A="/assets/syntactic_unit_expansion.B4GQre_d.png",D="/assets/filediffs_17.ChwHqHj7.png",F="/assets/filediffs_12.8jiO8UWB.png",Y="/assets/filediffs_13.ItnYLntD.png",N="/assets/add_codeblock.CThPgaUb.png",B="/assets/command_palette.BzZD2SYw.png",E="/assets/code_suggestions.D1koVKAc.png",j="/assets/codeblock_preview_diffs.DTrzMqwm.png",z="/assets/filediffs_11.B2rCbKyq.png",M="/assets/filematrix_10.8T9fXjsJ.png",U=JSON.parse('{"title":"Code review files","description":"","frontmatter":{},"headers":[],"relativePath":"files.md","filePath":"files.md","lastUpdated":1771404034000}'),G={name:"files.md"};function O(V,e,H,W,K,L){const o=n("more");return l(),r("div",null,[e[4]||(e[4]=a('<h1 id="code-review-files" tabindex="-1">Code review files <a class="header-anchor" href="#code-review-files" aria-label="Permalink to &quot;Code review files&quot;">​</a></h1><p>This chapter explains in detail how to manage and review files in Reviewable. The file matrix provides an overview of the files in the pull request, while the individual file areas show diffs and line-specific discussions.</p><h2 id="revision-cells" tabindex="-1">Revision cells <a class="header-anchor" href="#revision-cells" aria-label="Permalink to &quot;Revision cells&quot;">​</a></h2><p>A file&#39;s evolution over the course of the pull request is summarized in both the file matrix and the individual file panels by a row of revision cells. Each cell represents one revision, with the leftmost ⊥ cell being a virtual base revision that changes to match the right diff bound.</p><p><img src="'+h+'" alt="reviewable file matrix diff bounds" width="550px"></p><p>The parentheses in a row are the current left and right diff bounds for the file. To adjust the diff bounds, click on one desired revision bound and drag to the other one. You can also just click on a revision to adjust the nearest bound.</p><p><img src="'+f+'" alt="revision cells demo"></p><p>Colors and icons in the revision cells summarize what happened in the pull request at each revision, as well as the latest review marks:</p><p><img src="'+p+'" alt="reviewable file matrix status" width="320px"></p><p>You can view further explanations for each color, icon, settings toggle, and colored numbers using <a href="./#help-on-using-reviewable">Contextual Help</a>.</p><h2 id="mark-reviewed" tabindex="-1">Mark as reviewed <a class="header-anchor" href="#mark-reviewed" aria-label="Permalink to &quot;Mark as reviewed {#mark-reviewed}&quot;">​</a></h2><p>One of Reviewable&#39;s core features is the ability to track the reviewed state of each file, at each revision, for each reviewer. This helps you easily remember — and indicate to others — where you left off in the review, and lets you focus on subsequent changes. Marking a file as reviewed doesn&#39;t necessarily mean you think it&#39;s ready to merge, but rather that you&#39;ve reviewed that revision and added your comments.</p><p><img src="'+u+'" alt="reviewable fill diffs mark file as reviewed"></p><p>The small button to the left of the file path indicates your current reviewed state for the file at the right diff bound and lets you change it. Typically, as a reviewer, the button will be red to indicate that you need to review this diff, and will turn green when clicked to indicate that you&#39;ve marked the file as reviewed. There are other less common states as well:</p><table tabindex="0"><thead><tr><th style="text-align:center;">Color</th><th>Meaning</th></tr></thead><tbody><tr><td style="text-align:center;"><i class="opaque circular inverted red unreviewed icon"></i></td><td>The file has not yet been reviewed at or after the right diff bound. Click to mark the file as reviewed.</td></tr><tr><td style="text-align:center;"><i class="opaque circular inverted green reviewed icon"></i></td><td>Reviewed by you at the right diff-bound. Click to immediately rescind your review marking.</td></tr><tr><td style="text-align:center;"><i class="opaque circular red-rim unreviewed icon"></i></td><td>The file has not yet been reviewed at or after the right diff bound. Click to mark as reviewed, but marking is not advised because some unreviewed changes are not shown in the current diff, the review is <a href="reviews.md#deferring-a-review">deferred</a>, or you are the author of the PR.</td></tr><tr><td style="text-align:center;"><i class="opaque circular green-rim unreviewed icon"></i></td><td>Reviewed by you or someone else at or after the right diff bound. Click to mark as reviewed but it&#39;s probably redundant.</td></tr></tbody></table><p>Review marks remain in a draft state and are only visible to you until <a href="./reviews#publish">published</a>. Recissions are publicized immediately however.</p><h2 id="file-review-state" tabindex="-1">File review state <a class="header-anchor" href="#file-review-state" aria-label="Permalink to &quot;File review state&quot;">​</a></h2><p>While the review button above indicates your personal state for the file at the current right diff bound, the square &quot;review chip&quot; icon <i class="designation anyone icon"></i> shows the file&#39;s overall state at the latest revision. The two may not always agree: for example, a file may need your overall review but not at your current diff bounds, or a file may have been sufficiently reviewed but you set your <a href="./reviews#file-review-type">review overlap strategy</a> to personally review all files.</p><p>The various possible states are:</p><table tabindex="0"><thead><tr><th style="text-align:center;">State</th><th>Meaning</th></tr></thead><tbody><tr><td style="text-align:center;"><i class="red designation you icon"></i> </td><td>Your review of this file has been requested, either directly or due to team membership, and you have not yet reviewed it at the latest revision.</td></tr><tr><td style="text-align:center;"><i class="red designation anyone icon"></i> </td><td>Anyone is welcome to review this file, including you.</td></tr><tr><td style="text-align:center;"><i class="designation anyone icon"></i> </td><td>Anyone is welcome to review this file, but you&#39;ve either already done so or are not a reviewer.</td></tr><tr><td style="text-align:center;"><i class="green designation anyone icon"></i> </td><td>Anyone will be welcome to review this file after you&#39;ve published your review.</td></tr><tr><td style="text-align:center;"><i class="designation others icon"></i> </td><td>Specific other people have been requested to review this file, but you either already did so or your review was not requested.</td></tr><tr><td style="text-align:center;"><i class="green designation others icon"></i> </td><td>Specific other people will still need to review this file after you&#39;ve published your review.</td></tr><tr><td style="text-align:center;"><i class="designation done icon"></i> </td><td>The file has been sufficiently reviewed.</td></tr><tr><td style="text-align:center;"><i class="green designation done icon"></i> </td><td>The file will be sufficiently reviewed once you&#39;ve published your review.</td></tr></tbody></table><p>Clicking on the state icon <i class="designation done icon"></i> will reveal all the details about a file&#39;s current review state: who needs to review it and why, who has already reviewed it, and (when relevant) who reviewed it at revisions prior to the latest one.</p><p><img src="'+m+'" alt="file review state details" width="520px"></p><p>By default, Reviewable can only tell who has reviewed a file and infer some basic information about who should review it from a <code>CODEOWNERS</code> file, if present. To unlock the full power of this feature — including indicating the scope (e.g., &quot;security&quot; or &quot;accessibility&quot;) of each requested review, when a scope has been satisfied, or whether only specific people&#39;s reviews are needed — you&#39;ll need to <a href="./repositories#designated-reviewers">create designated reviewers</a> in the custom review completion condition.</p><h2 id="file-matrix" tabindex="-1">File matrix <a class="header-anchor" href="#file-matrix" aria-label="Permalink to &quot;File matrix&quot;">​</a></h2><p>The files panel displays a history matrix showing all files and revisions. Here, you can:</p><ul><li>View a summary of the PR&#39;s change history for each file.</li><li>Set diff bounds for any and all files.</li><li>Mark files as reviewed.</li><li>View the latest review state of each file.</li><li>Jump to a file&#39;s diff.</li><li>See delta stats for a diff and all diffs.</li></ul><p><img src="'+g+'" alt="reviewable file matrix" width="670px"></p><h3 id="file-list" tabindex="-1">File list <a class="header-anchor" href="#file-list" aria-label="Permalink to &quot;File list&quot;">​</a></h3><p>The file matrix lists all the files in the pull request. They&#39;re organized hierarchically, with files listed before subdirectories at every level. Hover over a nested directory path to see the full path. Obsolete files that once had changes but now have no differences with the target branch are automatically placed in the ↺ <strong>Reverted</strong> group. Select it to reveal the hidden files, or choose <strong>ungroup</strong> to return them to the main file list.</p><p>Click the file path to move directly to the diff for that file. Hold down <code>⌘</code>, <code>Ctrl</code>, <code>Alt</code> or <code>⇧</code> key (or combinations thereof) when clicking to open the file diff in a new browser tab, on GitHub, or <a href="./accountsettings#external-editor-line-link-template">in your editor</a>. To open every file at once, do the same on the &quot;N files&quot; indicator in the matrix header.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>File paths in italics indicate that the file is currently omitted from the file contents area because there&#39;s nothing interesting to see in it at the current diff bounds, but clicking will force it to appear.</p></div><p>To the left of the file path there&#39;s a button to <a href="#mark-reviewed">mark the file as reviewed</a>. The header has a corresponding button to mark all files as reviewed (if certain conditions hold — otherwise, a tooltip will tell you why it&#39;s disabled), with an option to undo the action immediately afterwards.</p><p>To the right of the file path you can optionally see reviewer avatars that provide a quick overview of a file&#39;s reviewers. The avatars get progressively more faded out as a user&#39;s review becomes less recent. You can hover over an avatar for details, or click on it to show the diff between that user&#39;s last reviewed revision (for each file) and the latest revision.</p><p>Further to the right is the <a href="#file-review-state">file review state</a> chip that you can click on for full details regarding who has reviewed a file and whether anyone still needs to review it. Chips for fully reviewed files are hidden from the file matrix to reduce visual noise, but will show up on hover.</p><p><img src="'+w+'" alt="reviewable file matrix options" width="500"></p><p>Off the right side of the matrix are delta stats for the current diffs, showing lines <span class="text-orange">changed</span>, <span class="text-green">added</span>, and <span class="text-red">deleted</span>. If a file is binary or isn&#39;t currently diffed no delta stats will be shown. The total of all displayed delta stats is displayed overhead, inline with the column header. Other information you may find here includes test coverage statistics and a dropdown <i class="grey commit icon"></i> with a list of commits included in the current diff bounds.</p><p>The elements above can be turned on or off via a small menu icon <i class="visual tweaks icon"></i> below the file matrix. You can also force all elements to appear &quot;all in overlay&quot;- when the file matrix is opened in full-screen overlay mode. To enter full-screen mode, click the minimize icon <i class="angle up icon"></i> on the top of the File matrix and then click the full-screen icon <i class="maximize icon"></i> .</p><p><img src="'+v+'" alt="reviewable file matrix options" width="200"></p><p>Files can also be grouped, like for the <strong>Tests</strong> group in the File matrix screenshot above. You can use this to reorder the file list somewhat (groups are listed alphabetically), and to enable marking a subset of files as reviewed with one click. Reviewable will automatically group some files for you, such as files that were only renamed, that appear in a vendored directory, or that were reverted back out of the pull request. See the section on <a href="./repositories#condition-output">custom review completion conditions</a> for instructions on how to make custom file groups in your repository.</p><h3 id="column-headings" tabindex="-1">Column headings <a class="header-anchor" href="#column-headings" aria-label="Permalink to &quot;Column headings&quot;">​</a></h3><p>Each column in the matrix represents a single revision of each of the files in the review. Each revision consists of one or more commits. The headings vary in style to indicate the different kinds of revisions.</p><table tabindex="0"><thead><tr><th style="text-align:center;">Label</th><th>Meaning</th></tr></thead><tbody><tr><td style="text-align:center;">r1</td><td>An immutable revision (even if the branch is rebased).</td></tr><tr><td style="text-align:center;"><em>r1</em></td><td>A provisional revision whose commits may still change.</td></tr><tr><td style="text-align:center;"><s>r1</s></td><td>Outdated revision, no longer part of the pull request due to being force-pushed out. Retained so you can still diff against it.</td></tr><tr><td style="text-align:center;"><i class="cell reviewed icon"></i></td><td>A (virtual) last revision that you marked as reviewed for each file, defaulting to ⊥. You can click it to set the diff bounds to be between the last reviewed revision and the latest revision for each file, or drag-select to any other revision of your choice.</td></tr><tr><td style="text-align:center;"><i class="cell participants on icon"></i></td><td>A (virtual) last revision that anyone marked as reviewed for each file, defaulting to ⊥. You can click it to set the diff bounds to be between the last revision reviewed by anyone and the latest revision for each file, or drag-select to any other revision of your choice.</td></tr><tr><td style="text-align:center;">⊥</td><td>This is the base version for a file in the target branch of the PR. The exact commit may depend on the right diff bound if the pull request has been rebased.</td></tr></tbody></table><p>You can also drag the column headers (⊥, r1, r2, r3...) to bulk-select diff bounds across all files. This sets the diff bounds for every file as close as possible to the new range. Many reviewers prefer this method over adjusting each file individually because it lets you view one coherent set of diffs at a time.</p><h2 id="diff-controls" tabindex="-1">Diff controls <a class="header-anchor" href="#diff-controls" aria-label="Permalink to &quot;Diff controls&quot;">​</a></h2><p>Where the file matrix gives you fine-grained control over the diff bounds, the diffs panel allows you to tweak the diffs that Reviewable automatically selects for you and make other coarse-grained adjustments.</p><p><img src="'+b+'" alt="reviewable diff controls" width="615"></p><p>At the top of the panel you&#39;ll find an informational description of your current diff bounds.</p><h3 id="show-default-diffs-to-review" tabindex="-1">Show default diffs to review <a class="header-anchor" href="#show-default-diffs-to-review" aria-label="Permalink to &quot;Show default diffs to review&quot;">​</a></h3>',48)),i("p",null,[e[1]||(e[1]=t("The large purple ")),e[2]||(e[2]=i("strong",null,"Show Diffs to Review",-1)),e[3]||(e[3]=t(" button (exact wording varies) will set the diff bounds on all the files to the next range that Reviewable thinks you need to examine. By default, when you first load the review page, this button has in essence already been clicked for you — that is, the initial diffs will be what Reviewable thinks you should be looking at, not necessarily the ones that you were looking at on your last visit. ")),d(o,null,{default:c(()=>e[0]||(e[0]=[t("If you're a reviewer in a "),i("strong",null,"combined commits",-1),t(` style review (commits panel > revision mapping > "combine commits for review"), this will be the range between the last reviewed revision (for each file) and the latest revision. If you're using `),i("strong",null,"review each commit",-1),t(" style, this will be the range between the last fully reviewed commit and the next one. If you're the PR author, this will be the range between the last snapshotted revision and the latest one, so you can review the diffs that you have just pushed.")])),_:1})]),e[5]||(e[5]=a('<p>Next to the button is a <strong>file selection</strong> dropdown with three <strong>review overlap strategy</strong> options. This setting changes which file diffs are suggested for the user to review when there are multiple participating reviewers. Changing this option in any review will implicitly set the default for any future reviews.</p><ul><li><strong>Skip files claimed by others</strong> suggests files that have been previously reviewed by you, or that nobody has reviewed yet. Select this if you want to divide work by skipping files already reviewed by someone at an earlier version.</li><li><strong>Review any unreviewed files</strong> suggests files to review if they have not been reviewed by anyone at the current revision. Select this if you want to combine efforts and review any file that needs reviewing.</li><li><strong>Review all files personally</strong> suggests files you have not personally reviewed. Select this if you want to ensure that you review every file yourself, ignoring other reviewers.</li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Regardless of which option you select you will still be able to manually diff and review any file you want.</p></div><h3 id="show-other-diffs" tabindex="-1">Show other diffs <a class="header-anchor" href="#show-other-diffs" aria-label="Permalink to &quot;Show other diffs&quot;">​</a></h3><p>Next you&#39;ll find a row of buttons that let you set other frequently used diff bounds.</p><p><img src="'+y+'" alt="reviewable diff controls" width="450"></p><ul><li><strong>All changes</strong> will show the full diffs between the base and the latest revision for each file. This will show you exactly the full deltas that will be applied if the PR is merged.</li><li><strong>Unreviewed by...</strong> will show the changes that have not yet been reviewed by a specific person (either you or another reviewer), or that have not yet been reviewed by anyone at all. (If a reviewer doesn&#39;t show up in this list then they haven&#39;t marked any files as reviewed yet.)</li></ul><h3 id="preferences" tabindex="-1">Preferences <a class="header-anchor" href="#preferences" aria-label="Permalink to &quot;Preferences&quot;">​</a></h3><p>Click the bottom of the diffs panel <i class="visual tweaks icon"></i> to expand your diff-related preferences. These settings are personal to you and apply across all organizations and repositories.</p><p><img src="'+k+'" alt="reviewable diff controls" width="650"></p><p>The <strong>initial diff bounds</strong> dropdown allows you to select the diff bounds that will be applied automatically when you load a review page from among the options available for manual use above. In essence, you&#39;ll be telling Reviewable which button to automatically click for you when a review loads. The selection for when you&#39;re a reviewer vs a pull request author are tracked separately.</p><p><strong>Max diffs displayed</strong> lets you customize when a review will switch into <a href="#single-file-mode">single file mode</a>. You might want to set this higher if you have a powerful machine and don&#39;t mind trading off page loading time against faster access once it&#39;s loaded. Conversely, you may want to set it lower if you find that reviews with many files are having a noticeable impact on performance. Set it to <code>1</code> to force all reviews into single file mode.</p><p>The <strong>diff layout</strong> and <strong>line length</strong> options replicate the more compact <a href="#diff-layout">diff layout</a> controls available on every file panel.</p><h2 id="revision-commits" tabindex="-1">Virtual commits file <a class="header-anchor" href="#revision-commits" aria-label="Permalink to &quot;Virtual commits file {#revision-commits}&quot;">​</a></h2><p>Each revision in a review is an automatic, unmodifiable capture of one or more commits. The mapping between commits and revisions is shown in a synthetic <strong>Commits file</strong>. This virtual file is kept up-to-date automatically by Reviewable and will always be listed first in the files list. It behaves just like a normal file in that it will be diffed against the selected revision and supports discussions, however it <em>will not</em> impact your repository or pull request in anyway — it&#39;s solely used by Reviewable for presenting and reviewing commit messages.</p><p><img src="'+x+'" alt="reviewable commit matrix" width="515"></p><p><img src="'+_+'" alt="reviewable commit review" width="610"></p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>While the commit file is virtual, it still needs to be marked as reviewed as much (or as little) as normal files. It&#39;s included in review file <a href="#counters">counters</a>, but not counted in review status messages unless it&#39;s the only unreviewed file. It&#39;s also handled separately from normal files when evaluating a custom review completion condition; see <a href="./repositories#custom-review-completion-condition">custom completion condition</a> for details.</p></div><p>This special file also provides additional controls over the mapping between revisions and commits.</p><p><img src="'+q+'" alt="reviewable commit controls" width="540"></p><h3 id="review-style" tabindex="-1">Review style <a class="header-anchor" href="#review-style" aria-label="Permalink to &quot;Review style&quot;">​</a></h3><p>The <strong>Revision mapping</strong> dropdown lets you choose the style of this review, affecting how commits are grouped into revisions and the suggested sequence of diffs to review.</p><p><img src="'+T+'" alt="reviewable review style" width="290"></p><p>There are two review styles to choose from. Changing the review style will require a few seconds to a minute or so to restructure the provisional revisions in the review.</p><ul><li><strong>Combine commits for review</strong> — review commits that are grouped together according to the time at which they were pushed and a few other factors. Keep in mind that some commits might not be accessible for diffing.</li><li><strong>Review each commit separately</strong> — a revision is created for each commit, even if a successive commit wrote over previous changes. We recommend choosing this review style only if the commits have been carefully organized. Keep in mind that there are some built-in limits on how many revisions can be created together. This means that commits may get aggregated if those limits are exceeded. Please contact support to discuss raising the limits for your repos if you feel this would be useful.</li></ul><p>If you&#39;re a repository administrator, you can also set the default review style for the repository via repository settings.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Snapshotted revisions won’t get restructured, so you may encounter surprising results if you switch the review style after beginning the review. An exception to this is when a revision was snapshotted only because somebody other than the PR author viewed it - in which case it appears snapshotted but is OK for restructuring. The purpose of this is to enable a reviewer to switch the review style, since just loading the page will show the diff and snapshot the revisions.</p></div><h3 id="compacting-revisions" tabindex="-1">Compacting revisions <a class="header-anchor" href="#compacting-revisions" aria-label="Permalink to &quot;Compacting revisions&quot;">​</a></h3><p>Since revisions are immutable, long running reviews can end up with a lot of them, which impacts the performance and usability of the review. You can have Reviewable reduce the number of revisions for all participants by clicking the <i class="compact icon"></i> <strong>Compact revisions</strong> button if you have write access to the repository. This will attempt to eliminate and combine redundant revisions but the process is slightly lossy:</p><ul><li>Discussions may be reassigned to an equivalent revision, and you may no longer be able to display the original diff context.</li><li>Code blocks may be reassigned to an equivalent revision.</li><li>Only the latest review mark from every reviewer is guaranteed to be retained.</li><li>Matched prior revisions may be removed for rebased or merged revisions, making diffs less useful.</li></ul><p>Access to the review will be blocked until the process completes (typically within 10 to 15 seconds). Revisions that are kept will retain their old numbers, which means that revision numbers may no longer be sequential.</p><div class="danger custom-block"><p class="custom-block-title">DANGER</p><p>If something goes dreadfully wrong, you can ask admin staff to recover the original review from a backup automatically snapshotted at the start, though this will discard any changes made in the meantime.</p></div><h2 id="file-contents" tabindex="-1">File contents <a class="header-anchor" href="#file-contents" aria-label="Permalink to &quot;File contents&quot;">​</a></h2><p>Below the <a href="./discussions">top-level discussions</a> you&#39;ll find the file contents. Each file in the review has its own diff panel.</p><h3 id="file-header" tabindex="-1">File header <a class="header-anchor" href="#file-header" aria-label="Permalink to &quot;File header&quot;">​</a></h3><p>The file path and name are shown at the top of each file diff panel. If the file paths are too long some may be collapsed in places with a …; hover over the path or swipe to expand and see the full path. You can click on the path to activate a dropdown menu with relevant actions, such as opening the file in your editor, copying the file path, or starting a new file-level discussion.</p><p>The header holds the standard <a href="#mark-reviewed">mark as reviewed</a> button, a <a href="#file-review-state">review state chip</a>, and <a href="#revision-cells">revision cells</a> for adjusting diff bounds.</p><p>To the right of the cells you&#39;ll see the delta stats for the current diff, showing lines <span class="text-orange">changed</span>, <span class="text-green">added</span>, and <span class="text-red">deleted</span>.</p><p>If you&#39;ve set up a <a href="./repositories#code-coverage">code coverage</a> feed then you may see an umbrella in the header with a coverage percentage, and a dropdown menu that has further details. The diffs will then also show coverage bars; you can <a href="./tips#code-coverage-bars">customize the colors</a> if desired.</p><p><img src="'+P+'" alt="reviewable file diffs"></p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Any special messages will appear immediately underneath the header. These include notices of renamed files, explanations for why a diff isn&#39;t showing, etc.</p></div><p><img src="'+R+'" alt="reviewable file diff rename message" width="560"></p><h3 id="file-diff" tabindex="-1">File diff <a class="header-anchor" href="#file-diff" aria-label="Permalink to &quot;File diff&quot;">​</a></h3><p>In the file diff panel, you’ll see the differences between the two revisions of the file set as the diff bounds. Removed lines are highlighted in red, and added lines in green. You can <a href="./accountsettings#adjust-contrast">adjust the contrast</a> as well as <a href="./accountsettings#accessibility">replace line colors</a> in the account settings panel.</p><p>Most languages also get automatic syntax highlighting. If your file isn&#39;t getting highlighted, please <a href="https://github.com/reviewable/reviewable/issues" target="_blank" rel="noreferrer">open an issue</a> so that we can add the right file extension mapping. If the language is not one of the 190+ that have syntax highlighting in <a href="https://highlightjs.org/" target="_blank" rel="noreferrer">highlight.js</a>, you&#39;ll need to open an issue with that project or contribute a language definition module yourself.</p><p><img src="'+C+'" alt="reviewable fill diffs panel"></p><p>In the gutter (either beside or between the diffs) you may see any of the following markers that indicate some otherwise invisible property of the adjoining line(s):</p><table tabindex="0"><thead><tr><th style="text-align:center;">Marker</th><th>Meaning</th></tr></thead><tbody><tr><td style="text-align:center;"><code>⊥</code></td><td>This line only has changes in the base branch, between the base commits corresponding to the current diff bounds.</td></tr><tr><td style="text-align:center;"><code>␣</code></td><td>This line only has whitespace changes.</td></tr><tr><td style="text-align:center;"><code><i class="resolved discussion icon"></i></code></td><td>There are one or more resolved discussions on this line. Click to reveal.</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Reviewable only supports text file diffs at this time. For images and other file types you&#39;ll need to go view the diff on GitHub — a convenient link will usually be provided. You will still be able to post comments against such files but they won&#39;t be attached to a specific line.</p></div><p>If a file requires your review, you&#39;ll see a tab at the bottom of the diff to <a href="#mark-reviewed">mark the file as reviewed</a> and automatically advanced to the next file to review.</p><h3 id="diff-layout" tabindex="-1">Diff layout <a class="header-anchor" href="#diff-layout" aria-label="Permalink to &quot;Diff layout&quot;">​</a></h3><p>As you decrease the width of the browser window, the diff panels will convert from a side-by-side view to a unified view and vice-versa. Also, the code will automatically be wrapped at a reasonable, round number of columns proportional to the window width. (Lines that are wrapped get a thick vertical bar on the left side.)</p><p>You can override this behavior by clicking the small caret <i class="large dropdown icon"></i> in the top right corner of every file diff panel. More diff layout options are available in the <a href="#preferences">diffs panel preferences</a>.</p><p><img src="'+I+'" alt="reviewable fill diffs width control"></p><p>In the bottom field, you can enter the number of columns where lines should wrap in the diff view. If you do, Reviewable will <em>always</em> use this margin and show a side-by-side diff only if your window is wide enough. Click <strong>Auto</strong> to revert line wrapping control back to Reviewable. Finally, in either state, you can toggle on <strong>Single</strong> to force a unified diff view even if the window is wide enough to fit two columns.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>All of these settings are personal but global across all files, PRs, and repos.</p></div><h3 id="collapsed-sections" tabindex="-1">Collapsed sections <a class="header-anchor" href="#collapsed-sections" aria-label="Permalink to &quot;Collapsed sections&quot;">​</a></h3><p>Reviewable will automatically collapse sections of the diff with no meaningful changes and no discussions. You can selectively expand these collapsed sections in a number of ways:</p><p><img src="'+S+'" alt="reviewable fill diffs expanding collapsing"></p><ol><li><p>You can click the small <strong>Expand</strong> tabs on the right to manually reveal more context above or below the collapsed section, a few lines at a time.</p></li><li><p>If you see a small, light-colored declaration immediately below the collapsed section, this indicates the nearest syntactic unit that the code below is a part of — e.g., a function or a class. You can click this signature to expand the diff to show all of the syntactic unit.</p></li></ol><p><img src="'+A+'" alt="reviewable syntactic unit expansion"></p><ol start="3"><li>In the collapsed section gap, you will see some subset of the following line counts. Clicking on any of these collapsed line categories will expand only those lines (plus a bit of context around them).</li></ol><ul><li><strong>No changes</strong> — lines with no changes at all between your current diff bounds.</li><li><strong>Whitespace changes</strong> — this is the count of lines in which only the whitespace has changed (marked with a <code>␣</code> when expanded).</li><li><strong>Base commit changes</strong> — are lines in which only the base branch has changed, likely not due to work on this pull request (marked with a <code>⊥</code> when expanded)</li><li><strong>Resolved discussion</strong> — are lines with resolved discussions attached (marked with a <code><i class="resolved discussion icon"></i></code> when expanded).</li></ul><ol start="4"><li>Click the <strong>Collapsed</strong> drop-down to view options for expanding everything — either for <strong>this file</strong> or <strong>all files</strong>. The toggle button selects whether to <strong>collapse whitespace changes</strong> in all files in this review. The setting will also be your default for new reviews.</li></ol><p><img src="'+D+'" alt="reviewable fill diffs collapsed drop down"></p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>The only way to collapse expanded diff lines back down is to change the diff bounds.</p></div><h2 id="line-discussion" tabindex="-1">Line-specific discussions <a class="header-anchor" href="#line-discussion" aria-label="Permalink to &quot;Line-specific discussions {#line-discussion}&quot;">​</a></h2><p>Click any line in a diff — even one that already has a discussion or isn’t part of a change — to start a new discussion.</p><p><img src="'+F+'" alt="reviewable fill diffs begin a new discussion" width="580"></p><p>This new discussion will also appear in the diffs of other revisions, at the nearest corresponding line. It won’t disappear until that discussion is resolved or withdrawn, even if the underlying file changes drastically. Click the small purple dog-ear button in the top-right corner to switch the diff to the exact one on which the comment was made.</p><div class="danger custom-block"><p class="custom-block-title">DANGER</p><p>If the dog-ear is red, this indicates that the current context may be inaccurate because of significant changes that have been made since the time the comment was made in the original revision. Click the red button to see the discussion in its original context.</p></div><p><img src="'+Y+'" alt="reviewable fill diffs switch to original revision" width="640"></p><p>Next to the dog-ear is the line number for this discussion, relative to the file contents in the current diff. Click it to copy the discussion link or line path, or to open the file in your editor or on GitHub</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>You can <a href="./accountsettings#line-link-template">customize the line link</a> to open your favorite editor on the given line instead.</p></div><p>For lots more information on discussions, please see the <a href="./discussions">next chapter</a>.</p><h3 id="code-snippets-quoting-code-and-making-code-suggestions" tabindex="-1">Code Snippets, Quoting Code, and Making Code Suggestions <a class="header-anchor" href="#code-snippets-quoting-code-and-making-code-suggestions" aria-label="Permalink to &quot;Code Snippets, Quoting Code, and Making Code Suggestions&quot;">​</a></h3><p>It&#39;s easy to add new code, quote existing code, or suggest changes that display as a diff — all directly within your comment. The simplest way to add a code snippet is to click the <i class="icon create codeblock"></i>  button in the actions menu and typing your code in the code block.</p><p><img src="'+N+'" alt="reviewable insert codeblock"></p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>You can add as many code blocks as you want to your comment!</p></div><p>You can also insert existing code from the diffs into your code block. There are a couple of ways to get the code into the code block at your disposal.</p><h4 id="before-making-a-comment" tabindex="-1">Before making a comment <a class="header-anchor" href="#before-making-a-comment" aria-label="Permalink to &quot;Before making a comment&quot;">​</a></h4><p>Select the line or lines of code before adding a comment. After making a selection, you can use the command palette to insert a comment at the last selected line, with a code block that includes your selection.</p><p><img src="'+B+'" alt="reviewable insert code using command palette" width="530"></p><h4 id="adding-code-to-an-existing-comment" tabindex="-1">Adding code to an existing comment <a class="header-anchor" href="#adding-code-to-an-existing-comment" aria-label="Permalink to &quot;Adding code to an existing comment&quot;">​</a></h4><p>If you have already started writing a comment, you can click the <i class="icon create codeblock"></i> button in the actions menu and an empty code block will appear. The way to insert existing code at this point is to use the &#39;select diff lines&#39; button that appears inside the code block. This will bring up a pair of text selection pinchers that allow you to indicate the lines you want to insert. Once you have made your selection, hit the &#39;accept selection&#39; button to add the code to your code block.</p><p><img src="'+E+'" alt="reviewable code suggestions"></p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Double click the &#39;select diff lines&#39; button to quickly grab the current, single line of code from inside an existing comment.</p></div><p>Code in the code block remains a quote until you edit it. Once a change is made, the code block becomes a suggestion. Then, in preview mode, you can view the diff or hide it by clicking the toggle in the code block header.</p><p><img src="'+j+`" alt="reviewable codeblock preview diff" width="470"></p><h2 id="diff-customization" tabindex="-1">Diff customization <a class="header-anchor" href="#diff-customization" aria-label="Permalink to &quot;Diff customization&quot;">​</a></h2><p>You can customize which files are diffed and how the diffs are displayed at the repository level.</p><h3 id="generated-files" tabindex="-1">Generated files <a class="header-anchor" href="#generated-files" aria-label="Permalink to &quot;Generated files&quot;">​</a></h3><p>Reviewable will automatically detect many kinds of generated files and hide the diff by default. If you&#39;d like to add a new common pattern (based either on the filename or the contents of the file), don&#39;t hesitate to let us know. If your generated files are specific to your project, you have two options:</p><ul><li>You can tweak your build to insert the exact text <code>GENERATED FILE DO NOT EDIT</code> as a comment on a line by itself into the generated file. There can be up to 4 additional characters on the line before and after the marker text. We have this restriction so that Reviewable doesn&#39;t accidentally consider your build script itself to be generated!</li><li>You can use <code>.gitattributes</code> files checked into your repo to control diffing — see below.</li></ul><h3 id="diff-suppression-and-file-type" tabindex="-1">Diff suppression and file type <a class="header-anchor" href="#diff-suppression-and-file-type" aria-label="Permalink to &quot;Diff suppression and file type&quot;">​</a></h3><p>Reviewable respects the diff settings in your <code>.gitattributes</code> files to the best of its ability. For example, to disable diffs for any files in the vendor directory and use PHP highlighting for all .phpt files, you could insert a <code>.gitattributes</code> file in the root of your repo, like this:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>    /vendor/** -diff</span></span>
<span class="line"><span>    *.phpt diff=php</span></span></code></pre></div><p>For details on the syntax, see the <a href="https://git-scm.com/docs/gitattributes" target="_blank" rel="noreferrer">gitattributes reference doc</a>.</p><h2 id="special-states" tabindex="-1">Special states <a class="header-anchor" href="#special-states" aria-label="Permalink to &quot;Special states&quot;">​</a></h2><p>The way diffs are displayed is subject to some special states, on both file-by-file and whole-review bases.</p><h3 id="diff-suppressing-states" tabindex="-1">Diff-suppressing states <a class="header-anchor" href="#diff-suppressing-states" aria-label="Permalink to &quot;Diff-suppressing states&quot;">​</a></h3><p>There are many situations in which a diff won&#39;t be produced for a given file — either to ensure good performance, or because it isn&#39;t sensible to do so. Some examples include:</p><ul><li>Files that appear to be binary or minified.</li><li>Diffs that are too big or were taking too long to compute.</li><li>Files with too many lines.</li><li>Files with custom diffs specified in <code>.gitattributes</code> that Reviewable cannot respect.</li></ul><p>In such cases, the file will appear with a message explaining why the diff is missing. Typically, there will also be a button such as <strong>Try Again</strong> or <strong>View on GitHub</strong> by which you can override or bypass the condition.</p><div class="danger custom-block"><p class="custom-block-title">DANGER</p><p>Be careful if you’re trying to use <code>⌘-f</code> or <code>ctrl-f</code> to find something in the diffs when some files are not shown.</p></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>If diffs that make sense to be shown were omitted for some reason, you&#39;ll see a toast message that explains what happened and lets you override the decision. (See screenshot below.)</p></div><h3 id="single-file-mode" tabindex="-1">Single file mode <a class="header-anchor" href="#single-file-mode" aria-label="Permalink to &quot;Single file mode&quot;">​</a></h3><p>Reviewable automatically enters a single file mode to preserve performance when the number of visible files exceeds a threshold (configurable in the <a href="#preferences">diffs panel preferences</a>). In this mode, only one file will appear at a time. You&#39;ll also see a summary explanation in a toast notification, together with a button which you can click to force all files to appear anyway until you leave the page.</p><p><img src="`+z+'" alt="reviewable fill diffs some diffs not shown" width="420"></p><p>Single-file mode is similar — but not identical — to the mode that you enter when you <code>⌘</code>, <code>Ctrl</code>, or <code>⇧</code> click a file open into a separate tab.</p><p>This toast also appears if any diffs are throttled or large diffs are hidden. In these cases, the page stays in multi-file mode, and the toast message explains why.</p><h2 id="support-for-specific-workflows" tabindex="-1">Support for specific workflows <a class="header-anchor" href="#support-for-specific-workflows" aria-label="Permalink to &quot;Support for specific workflows&quot;">​</a></h2><p>Reviewable has extra built-in support for some specific development workflows.</p><h3 id="rebasing" tabindex="-1">Rebasing <a class="header-anchor" href="#rebasing" aria-label="Permalink to &quot;Rebasing&quot;">​</a></h3><p>Reviewable gracefully supports rebasing and force-pushing to your branch PR in the middle of a review. Previous revisions are preserved and marked as obsolete (with a strikethrough), even if the commits they’re composed of have disappeared during the rebase. You’ll still be able to diff against those revisions, and changes between the old and new base will automatically collapse in the diff so as to avoid distraction from deltas that don’t relate to this PR.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>To avoid garbage collection, Reviewable pins these commits in your repo using special refs under <code>refs/reviewable</code> — as long as the repository is connected.</p></div><p>Reviewable also uses heuristics to match rebased commits to their ancestors using commit messages. When successful, this enables Reviewable to suggest minimum-delta revision pairs for diffing in the “review each commit” style even if you reordered the commits. Arcs (curved connector lines) that link blocks of revisions above the file matrix show a high-level overview of this mapping. (We don’t show matches between individual revisions because that can quickly lead to an unreadable diagram.)</p><p>By design, Reviewable doesn&#39;t track files that haven&#39;t deviated from their base form — including files that have been modified back to their original state. When applying heuristics, Reviewable may intentionally &quot;force&quot; a revision when it otherwise wouldn&#39;t to ensure you don&#39;t miss a critical diff. When applicable, revision cells in both the <a href="#file-matrix">file matrix</a> and <a href="#file-header">file header</a> will also have a unique styling.</p><table tabindex="0"><thead><tr><th style="text-align:center;">Symbol</th><th>Meaning</th></tr></thead><tbody><tr><td style="text-align:center;"><img src="'+M+'" alt="reviewable prior action" width="200"></td><td><strong>Inner Disc Color</strong>: File action against matched prior rebased revision. <br> <strong>Outer Background Color</strong>: File action against immediately preceding revision. <br> In this example, <i>r6</i> is not modified compared to <i>r4</i>, but is modified compared to <i>r5</i>.</td></tr><tr><td style="text-align:center;"><br></td><td></td></tr></tbody></table><h3 id="forked-repos-tracking-upstream-changes" tabindex="-1">Forked repos tracking upstream changes <a class="header-anchor" href="#forked-repos-tracking-upstream-changes" aria-label="Permalink to &quot;Forked repos tracking upstream changes&quot;">​</a></h3><p>Some advanced workflows require overwriting the target branch of a PR with the head branch when it&#39;s ready to merge. This is necessary, for example, if you&#39;re maintaining a fork and rebasing from the upstream master. In such cases, both GitHub and Reviewable will choose the wrong base commit to compare files, and display not only all of the upstream changes—but also all the extra changes made in your fork over time.</p><p>To get the diff that you want, add a <code>Merge manually by overwriting target</code> label <strong>(exact spelling!)</strong> to your PR. This will cause Reviewable to compare files against the current head of the target branch. Now, you&#39;ll see upstream changes and any conflicts you resolved during the rebase, while leaving out modifications in your fork that survived unscathed.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>For best results, add the label to the PR when you first create it.</p></div>',123))])}const X=s(G,[["render",O]]);export{U as __pageData,X as default};
